<div class="px-5 py-8" style="font-family:Inter" infinite-scroll (scrolled)="onScroll()">
  <div class="mt-2 p-0">
    <div class="grid">
      <div class="col-12 lg:col-3 py-3 pr-5">
        <h6 class="text-xl">My Profile</h6>
        <div class="">
          <div class="card px-4 text-center">
            <p-avatar class="px-5 mt-5" image="{{fileDownload}}{{fotoProfile}}" styleClass="w-5rem h-5rem"
              shape="circle">
            </p-avatar>
            <h5 class="text-lg mt-3">{{fullname}}</h5>
            <p class="text-secondary text-sm">{{position}}</p>
            <hr>
            <div class="grid">
              <div class="col-4 lg:col-4 sm:col-4">
                <p-avatar class="pt-2" image="../../../../assets/icons/icons8-facebook-48.png" shape="circle">
                </p-avatar>
              </div>
              <div class="col-4 lg:col-4 sm:col-4">
                <p-avatar class="pt-2" image="../../../../assets/icons/icons8-instagram-48.png" shape="circle">
                </p-avatar>
              </div>
              <div class="col-4 lg:col-4 sm:col-4">
                <p-avatar class="pt-2" image="../../../../assets/icons/icons8-linkedin-circled-48.png" shape="circle">
                </p-avatar>
              </div>
            </div>
            <div class="text-left mt-4">
              <p class="text-sm"> <i class="pi pi-user mr-2"></i>Personal Details</p>
              <div class="px-2 text-xs text-left">
                <p class="text-secondary"><i class="pi pi-envelope pe-1"></i>
                  {{email}}</p>
                <p class="text-secondary"><i class="pi pi-phone pe-1"></i>
                  {{phoneNumber}}</p>
                <p class="text-secondary"><i class="pi pi-calendar pe-1"></i>
                  {{age}}</p>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="col-12 lg:col-6 pt-3 pb-3 ">
        <h6 class="text-xl">Thread & Discuss</h6>
        <div class="p-card text-right ">
          <div class="col-12 lg:col-12">
            <button pButton pRipple type="button" (click)="createNewThread()" styleClass="p-button-sm"
              label="Create New Thread" icon="pi pi-pencil" class="p-button-outlined p-button-rounded p-0 p-2"></button>
          </div>
        </div>
        <hr>
        <div *ngFor="let post of posts" class="col-12 lg:col-12">
          <div class="p-card p-0 border-noround">
            <div class="p-card-header">
              <div class="grid px-3 pt-3">
                <div class="col-12 lg:col-12 sm:col-12 pb-0">
                  <div class="grid">
                    <div class="col-1 lg:col-1 p-0 text-center flex align-items-center justify-content-center">
                      <p-avatar styleClass="w-2rem h-2rem" image="{{fileDownload}}{{post.user.photo.id}}"
                        shape="circle">
                      </p-avatar>
                    </div>
                    <div class="col-9 lg:col-9 p-0 m-0">
                      <label class=" font-semibold">{{post.user.fullname}}</label>
                      <div class="text-secondary font-italic text-xs">{{calculateDiff(post.createdAt)}} </div>
                    </div>
                    <div class="col-1 lg:col-1 p-0 text-center flex align-items-center justify-content-center">
                      <div *ngIf="post.postType.postTypeCode == premium; then premiums "></div>
                      <ng-template #premiums>
                        <p-tag icon="bi bi-star-fill" severity="warning" value="Premium" [rounded]="true"></p-tag>
                      </ng-template>
                    </div>
                  </div>
                </div>

              </div>
            </div>
            <div class="p-card-content p-0">

              <div class="offset-1 lg:offset-1 sm:offset-1 col-10 lg:col-10 sm:col-11 px-0 py-3">
                <label class="text-lg font-semibold">{{post.title}}</label>
              </div>
              <div class="offset-1 lg:offset-1 sm:offset-1 col-10 lg:col-10 sm:col-11 p-0 ">
                <div *ngIf="post.postType.postTypeCode == premium; then limit else nolimit "></div>
                <ng-template #limit>
                  <p
                    class="text-md surface-overlay white-space-nowrap overflow-hidden text-overflow-ellipsis md:text-overflow-clip lg:text-overflow-clip">
                    {{post.body}}</p>
                  <a type="button" (click)="premiumPost(post.id)">Read more -></a>
                </ng-template>
                <ng-template #nolimit>
                  <p class="text-md ">
                    {{post.body}}</p>
                </ng-template>
              </div>
              <div class="col-10 offset-1 lg:offset-1 md:offset-1 lg:col-10 sm:col-10 py-3 px-2 text-center">
                <p-galleria [value]="post.file" [responsiveOptions]="responsiveOptions"
                  [containerStyle]="{'max-width': '100%'}" [numVisible]="5">
                  <ng-template pTemplate="item" let-item>
                    <img src="{{fileDownload}}{{item.file.id}}" style="width: 100%; height: 300px; display: block;" />
                  </ng-template>
                  <ng-template pTemplate="thumbnail" let-item>
                    <div class="grid grid-nogutter justify-content-center">
                      <img src="{{fileDownload}}{{item.file.id}}" class="w-full p-3" style="height: 100px;" />
                    </div>
                  </ng-template>
                </p-galleria>
              </div>



              <div *ngIf="post.postType.postTypeCode == polling;">
                <div *ngIf="post.optionId != null; then voted else notVoted"></div>
              </div>

              <ng-template #voted>
                <div class="col-12">
                  <p-card sub header="{{post.question}}">

                    <div class="card-body mt-3">
                      <div class="grid">
                        <ng-container *ngFor="let option of post.postPollingOption">
                          <div *ngIf="post.optionId == option.id; then choosed else notChoosed"></div>
                          <ng-template #choosed>
                            <div class="col-12 bg-primary-900 shadow mb-1 bg-body rounded  text-white ">
                              <div class="grid w-full">
                                <div class="col-11 lg:col-11 sm:col-11 text-left">
                                  {{option.content }}
                                </div>
                                <div class="col-1 lg:col-1 sm:col-1  text-left">
                                  {{option.totalResponse}}
                                </div>
                              </div>
                            </div>
                          </ng-template>
                          <ng-template #notChoosed>
                            <div class="col-12 bg-primary shadow mb-1 bg-body rounded ">
                              <div class="grid w-full">
                                <div class="col-11 lg:col-11 sm:col-11 text-left">
                                  {{option.content }}
                                </div>
                                <div class="col-1 lg:col-1 sm:col-1  text-left">
                                  {{option.totalResponse}}
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </ng-container>
                      </div>
                    </div>

                  </p-card>
                </div>
              </ng-template>
              <ng-template #notVoted>
                <div class="col-12">
                  <div class="card">
                    <div class="card-header bg-primary-300 text-white  mb-3">
                      <p>{{post.question}}</p>
                    </div>
                    <div class="card-body text-black">
                      <div class="grid">
                        <button *ngFor="let option of post.postPollingOption" pButton pRipple
                          class="col-12 p-button-raised p-button-info mb-2" (click)="choose(option.id)" type="button">
                          <div class="grid w-full">
                            <div class="col-12 lg:col-12 sm:col-12 text-left">
                              {{option.content}}
                            </div>
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
            <div class="p-card-footer p-0">
              <div class="col-12 lg:col-12 sm:col-12 py-0 px-3">
                <p class="text-secondary font-italic text-xs">{{post.totalLike}} Likes &nbsp;&nbsp;{{post.totalComment}}
                  Comments</p>
              </div>
              <hr>
              <div class="col-12 lg:col-12 sm:col-12 ">
                <div class="grid px-3">
                  <div class="col-1 lg:col-1 sm:col-1 ">
                    <div *ngIf="post.likeId != null ; then thenBlock else elseBlock"></div>
                    <ng-template #thenBlock>
                      <span type="button" (click)="cancelLike(post.likeId, post.postType.postTypeCode)"
                        class="text-red-600 ">
                        <i class="bi bi-heart-fill h4"></i>
                      </span>
                    </ng-template>
                    <ng-template #elseBlock>
                      <span type="button" (click)="like(post.id, post.postType.postTypeCode)" class=" text-black">
                        <i class="bi bi-heart h4"></i>
                      </span>
                    </ng-template>
                  </div>
                  <div class="col-1 lg:col-1 sm:col-1 ">
                    <span type="button" class="h4 text-black" routerLink="/thread/comment/{{post.id}}">
                      <i class="bi bi-chat-right-text-fill "></i>
                    </span>
                  </div>
                  <div class="col-10 lg:col-10 sm:col-10 text-right ">
                    <div *ngIf=" post.bookmarkId !=null; then cancelBookmark else saveBookmark"></div>
                    <ng-template #cancelBookmark>
                      <span type="button" (click)="unbookmark(post.bookmarkId, post.postType.postTypeCode)"
                        class=" text-black">
                        <i class="bi bi-bookmark-fill  h4"></i>
                      </span>
                    </ng-template>
                    <ng-template #saveBookmark>
                      <span type="button" (click)="bookmark(post.id, post.postType.postTypeCode)" class="h4 text-black">
                        <i class="bi bi-bookmark  "></i>
                      </span>
                    </ng-template>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 lg:col-3 px-5 py-2">
        <h6 class="text-xl">Article</h6>
        <div class="col-12 lg:col-12 p-0 pb-3" *ngFor="let d of data">
          <div class="shadow-2 border-round h-full surface-card">
            <img src="{{fileDownload}}{{d.file.id}}" alt="article image" class="h-10rem w-full">
            <div class="py-2 px-3 flex flex-column">
              <span class="block text-xl font-medium text-blue-600">{{d.title}}</span>
              <p class="text-md text-900 font-medium mb-3 mt-1 line-height-3">{{d.content}}</p>
              <div class="flex">
                <div class="">
                  <div class="text-xs font-semibold text-600 mb-1">Post by Admin Community</div>
                  <div class="text-xs flex align-items-center text-secondary">
                    <i class="pi pi-send mr-1 text-xs"></i>
                    <span>{{calculateDiff(d.createdAt)}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>