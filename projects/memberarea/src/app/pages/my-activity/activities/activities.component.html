<div class="py-4" infinite-scroll (scrolled)="onScroll()">
    <p-panel header="My Events" [toggleable]="true">
        <div class="grid p-0 border-round">
            <div class="col-12 lg:col-4" *ngFor="let d of dataEvent; index as i">
                <div class="bg-gray-100 border-round shadow-3"><img src="{{fileDownload}}{{d.product.photo.id}}"
                        alt="Image" class="block w-full border-round-top h-9rem">
                    <div class="p-3 "><span class="block font-medium text-blue-600 mb-1">
                            <p-tag severity="info" [rounded]="true"><a class="p-link text-white"
                                    style="font-size: 0.6rem ;">Courses</a></p-tag>
                        </span>
                        <div class="text-md font-semibold text-900 font-medium mb-3 line-height-3">
                            <ng-container *ngIf="d.product.title.length > 30; else elseTemplatetitle">
                                {{d.product.title.substr(0,30)}}...
                            </ng-container>
                            <ng-template #elseTemplatetitle>
                                {{d.product.title}}
                            </ng-template>
                        </div>
                        <div class="line-height-3 mb-3 text-700">
                            <table class="pt-0">
                                <tbody class="p-0">
                                    <tr>
                                        <td class="pt-1" p><small><i class="bi bi-geo-alt"></i>
                                                <ng-container
                                                    *ngIf="d.product.location.length > 15; else elseTemplateLocation">
                                                    {{d.product.location.substr(0,15)}}...
                                                </ng-container>
                                                <ng-template #elseTemplateLocation>
                                                    {{d.product.location}}
                                                </ng-template>
                                            </small></td>
                                        <td><small class="ml-3"><i class="bi bi-coin"></i> {{d.product.price | currency
                                                :
                                                'Rp. '
                                                }}</small></td>

                                    </tr>

                                    <tr>
                                        <td class="pt-1"><small><i class="bi bi-calendar-date"></i> {{d.dateTimeStart |
                                                date : 'E, dd MMM yyyy'}} </small></td>
                                        <td><small class="ml-3"><i class="bi bi-alarm"></i> {{d.dateTimeStart | date :
                                                'hh:mm'}} -
                                                {{d.dateTimeEnd| date : 'hh:mm'}}</small></td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <div class="flex justify-content-between align-items-center">
                            <div class="flex  align-items-center">
                                <div class="text-sm font-bold text-blue-500 text-900 mb-1">
                                    <ng-container *ngIf="d.product.provider.length > 30; else elseTemplateProvider">
                                        {{d.product.provider.substr(0,30)}}...
                                    </ng-container>
                                    <ng-template #elseTemplateProvider>
                                        {{d.product.provider}}
                                    </ng-template>

                                </div>
                            </div>
                            <div class="flex">
                                <button pButton pRipple type="button" icon="pi pi-pencil" pTooltip="Edit"
                                    (click)="showFormUpdate(d.product.productType.productTypeName,i)"
                                    class="p-button-rounded p-button-primary p-button-text"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </p-panel>

    <p-panel header="My Courses" [toggleable]="true" class="pt-3">
        <div class="grid p-0  border-round">
            <div class="col-12 lg:col-4" *ngFor="let d of dataCourse; index as i">
                <div class="bg-gray-100 border-round shadow-3"><img src="{{fileDownload}}{{d.product.photo.id}}"
                        alt="Image" class="block w-full border-round-top h-9rem">
                    <div class="p-3 "><span class="block font-medium text-blue-600 mb-1">
                            <p-tag severity="warning" [rounded]="true"><a class="p-link text-white"
                                    style="font-size: 0.6rem ;">Courses</a></p-tag>
                        </span>
                        <div class="text-md font-semibold text-900 font-medium mb-3 line-height-3">
                            <ng-container *ngIf="d.product.title.length > 30; else elseTemplatetitle">
                                {{d.product.title.substr(0,30)}}...
                            </ng-container>
                            <ng-template #elseTemplatetitle>
                                {{d.product.title}}
                            </ng-template>
                        </div>
                        <div class="line-height-3 mb-3 text-700">
                            <table class="pt-0">
                                <tbody class="p-0">
                                    <tr>
                                        <td class="pt-1" p><small><i class="bi bi-geo-alt"></i>
                                                <ng-container
                                                    *ngIf="d.product.location.length > 15; else elseTemplateLocation">
                                                    {{d.product.location.substr(0,15)}}...
                                                </ng-container>
                                                <ng-template #elseTemplateLocation>
                                                    {{d.product.location}}
                                                </ng-template>
                                            </small></td>
                                        <td><small class="ml-3"><i class="bi bi-coin"></i> {{d.product.price | currency
                                                :
                                                'Rp. '
                                                }}</small></td>

                                    </tr>

                                    <tr>
                                        <td class="pt-1"><small><i class="bi bi-calendar-date"></i> {{d.dateTimeStart |
                                                date : 'E, dd MMM yyyy'}} </small></td>
                                        <td><small class="ml-3"><i class="bi bi-alarm"></i> {{d.dateTimeStart | date :
                                                'hh:mm'}} -
                                                {{d.dateTimeEnd| date : 'hh:mm'}}</small></td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <div class="flex justify-content-between align-items-center">
                            <div class="flex  align-items-center">
                                <div class="text-sm font-bold text-blue-500 text-900 mb-1">
                                    <ng-container *ngIf="d.product.provider.length > 30; else elseTemplateProvider">
                                        {{d.product.provider.substr(0,30)}}...
                                    </ng-container>
                                    <ng-template #elseTemplateProvider>
                                        {{d.product.provider}}
                                    </ng-template>

                                </div>
                            </div>
                            <div class="flex">
                                <button pButton (click)="showFormUpdate(d.product.productType.productTypeName,i)"
                                    pRipple type="button" icon="pi pi-pencil" pTooltip="Edit"
                                    class="p-button-rounded p-button-primary p-button-text"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </p-panel>
    <p-dialog header="Edit {{label}}" [(visible)]="displayFormUpdate" [breakpoints]="{'960px': '75vw'}"
        [style]="{width: '70vw'}" [draggable]="false" [resizable]="false">
        <div class="container bg-gray-300 p-5 border-round shadow-3">
            <form class="w-full mx-3 border-0 md:px-4 my-3" [formGroup]="dataUpdate">
                <div class="formgrid grid">
                    <div class="field col-12 md:col-6" formGroupName="product">
                        <label for="title">Title<span class="text-red-500">*</span></label>
                        <input pInputText id="title" formControlName="title" name="title" type="text"
                            class="w-full p-inputtext-sm" required>
                    </div>
                    <div class="field col-12 md:col-6" formGroupName="product">
                        <div formGroupName="productType" class="mt-1">
                            <label for="title">Product Type<span class="text-red-500">*</span></label>
                            <p-dropdown [options]="productType" [(ngModel)]="selectedProductType" styleClass=" w-full"
                                placeholder="{{label}}" formControlName="id" optionLabel="productTypeName"
                                optionValue="id" name="id" id="name">
                            </p-dropdown>
                        </div>

                    </div>
                    <div class="field col-12 md:col-12" formGroupName="product">
                        <label for="articleContent">Content<span class="text-red-500">*</span></label>
                        <textarea rows="8" pInputTextarea class="w-full" formControlName="content" id="articleContent"
                            name="articleContent"></textarea>
                    </div>
                    <div class="field col-12 md:col-6" formGroupName="product">
                        <label for="location">Provider<span class="text-red-500">*</span></label>
                        <input pInputText id="provider" formControlName="provider" name="provider" type="text"
                            class="w-full p-inputtext-sm" required>
                    </div>
                    <div class="field col-12 md:col-6" formGroupName="product">
                        <label for="locations">Locations<span class="text-red-500">*</span></label>
                        <input pInputText id="locations" formControlName="location" name="locations" type="text"
                            class="w-full p-inputtext-sm" required>
                    </div>
                    <div class="field col-12 md:col-6">
                        <label for="finishSchedule" class="w-full">Change Foto<span
                                class="text-red-500">*</span></label>

                        <p-fileUpload mode="basic" name="avatar" accept="image/*" [customUpload]="true"
                            styleClass="p-button-outlined p-button-plain" (onSelect)="fileUpload($event)"
                            chooseLabel="Upload Image"></p-fileUpload>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="beginSchedule" class="w-full">Start Schedule<span
                                class="text-red-500">*</span></label>

                        <p-calendar [showTime]="true" class="w-full" inputId="dateTimeStart" clas styleClass="calendar"
                            id="dateTimeStart" formControlName="dateTimeStart" [required]="true">
                        </p-calendar>
                    </div>
                    <div class="field col-12 md:col-6">
                        <label for="finishSchedule" class="w-full">Finish Schedule<span
                                class="text-red-500">*</span></label>

                        <p-calendar [showTime]="true" class="w-full" inputId="dateTimeEnd" clas styleClass="calendar"
                            id="dateTimeEnd" formControlName="dateTimeEnd" [required]="true">
                        </p-calendar>
                    </div>
                </div>

            </form>
        </div>
        <ng-template pTemplate="footer">
            <p-button (click)="displayFormUpdate=false" label="Cancel" styleClass="p-button-text"></p-button>
            <p-button (click)="update()" type="submit" label="Update" styleClass="p-button-text"></p-button>
        </ng-template>
    </p-dialog>
</div>